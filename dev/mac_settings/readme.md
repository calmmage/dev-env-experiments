# macOS Settings Tracker

This tool helps track macOS settings changes to assist in creating and maintaining declarative system configurations (like nix home-manager).

## How it Works

1. First run creates a reference snapshot of your current macOS settings
2. After you make changes to your Mac's settings, running the tool again shows what changed
3. Use the detected changes to update your nix configuration or other declarative setup

## Usage
```bash
# First run - creates reference.json
python3 tool.py
# Make changes to your Mac settings...
# See what changed (cleaned diff)
python3 tool.py
# See what changed (including full diff)
python3 tool.py --keep-full-diff
```


## Files

- `tool.py` - Main script that orchestrates the process
- `dump_settings.py` - Dumps current macOS settings
- `diff_settings.py` - Generates diff between two settings snapshots
- `clean_diff.py` - Cleans up the diff by removing noise (timestamps, counters, etc.)
- `reference.json` - Reference snapshot of settings
- `settings_diff_cleaned.json` - Cleaned diff showing relevant changes

## Purpose

When setting up macOS via declarative configuration (like nix home-manager), it can be hard to know exactly what settings need to be configured. This tool helps by:

1. Showing exactly what settings changed after manual configuration
2. Filtering out noise (timestamps, counters, etc.) to focus on meaningful changes
3. Providing clear before/after values that can be translated to configuration

Example workflow:
1. Start with basic nix configuration
2. Run tool to create reference
3. Make manual changes to Mac settings
4. Run tool to see what changed
5. Update nix configuration based on the diff
6. Repeat until all desired settings are captured in code

## Tips

- Use `--keep-full-diff` if you need to see all changes (including timestamps etc.)
- The cleaned diff focuses on meaningful changes by filtering out noise
- Reference file (`reference.json`) can be regenerated by deleting it and running the tool again